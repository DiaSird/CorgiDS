<mxfile host="65bd71144e">
    <diagram id="block_diagram" name="Page-1">
        <mxGraphModel dx="676" dy="443" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="Nintendo DS エミュレータ - 機能ブロック図" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="500" y="20" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="layer1_bg" value="Layer 1: UI / ホストシステム" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=#999999;fillColor=#F5F5F5;fontSize=11;dashed=1;dashPattern=1 4" parent="1" vertex="1">
                    <mxGeometry x="50" y="60" width="1300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="ui_1" value="EmuWindow&#xa;(Qt UI)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="90" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_2" value="EmuThread&#xa;(Execution)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="280" y="90" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_3" value="Input Handler&#xa;(Keys)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="460" y="90" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_4" value="Audio Output&#xa;(PortAudio)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="640" y="90" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_5" value="Config/Debug&#xa;(Qt Dialogs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="820" y="90" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="layer2_bg" value="Layer 2: エミュレータコア" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=#999999;fillColor=#F5F5F5;fontSize=11;dashed=1;dashPattern=1 4" parent="1" vertex="1">
                    <mxGeometry x="50" y="180" width="1300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="core_1" value="CPU&#xa;(ARM9/ARM7)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="core_2" value="Memory Mgmt&#xa;(RAM/VRAM)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="260" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="core_3" value="GPU&#xa;(2D/3D Render)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="420" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="core_4" value="SPU&#xa;(Audio Mix)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="580" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="core_5" value="Interrupt Ctrl&#xa;(IRQ/FIQ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="740" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="core_6" value="I/O Registers&#xa;(Ctrl Regs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#01579B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="900" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="layer3_bg" value="Layer 3: メモリシステム" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=#999999;fillColor=#F5F5F5;fontSize=11;dashed=1;dashPattern=1 4" parent="1" vertex="1">
                    <mxGeometry x="50" y="310" width="1300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="mem_1" value="BIOS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_2" value="Main RAM&#xa;(4MB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="230" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_3" value="WRAM&#xa;(96KB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="360" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_4" value="VRAM&#xa;(8MB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="490" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_5" value="Cartridge ROM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="620" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_6" value="Palette" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="750" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="mem_7" value="OAM&#xa;(Sprites)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="880" y="340" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="bus" value="32-bit Memory Bus" style="line;strokeWidth=3;html=1;strokeColor=#FF6600" parent="1" vertex="1">
                    <mxGeometry x="100" y="410" width="880" height="10" as="geometry"/>
                </mxCell>
                <mxCell id="layer4_bg" value="Layer 4: 周辺機器" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=#999999;fillColor=#F5F5F5;fontSize=11;dashed=1;dashPattern=1 4" parent="1" vertex="1">
                    <mxGeometry x="50" y="450" width="1300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="per_1" value="Timers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_2" value="DMA" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="220" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_3" value="SPI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="340" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_4" value="IPC (FIFO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="460" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_5" value="RTC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="580" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_6" value="Touchscreen" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="700" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_7" value="WiFi" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="820" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="per_8" value="Keypad" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;fontSize=11;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="940" y="480" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="layer5_bg" value="Layer 5: 実行サイクル (Fetch-Decode-Execute-Sync)" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=#999999;fillColor=#F5F5F5;fontSize=11;dashed=1;dashPattern=1 4" parent="1" vertex="1">
                    <mxGeometry x="50" y="560" width="1300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="exec_1" value="Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="120" y="590" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;strokeWidth=2;endArrow=classic;endFill=1" parent="1" source="exec_1" target="exec_2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="exec_2" value="Decode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="280" y="590" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;strokeWidth=2;endArrow=classic;endFill=1" parent="1" source="exec_2" target="exec_3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="exec_3" value="Execute" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="440" y="590" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;strokeWidth=2;endArrow=classic;endFill=1" parent="1" source="exec_3" target="exec_4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="exec_4" value="Sync / Int" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=2;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="600" y="590" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="df_cpu_mem" value="Read/Write" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#0066CC;strokeWidth=2;dashed=1;dashPattern=5 5;endArrow=classic;endFill=1" parent="1" source="core_1" target="core_2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="df_cpu_gpu" value="Cmd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#00AA00;strokeWidth=2;dashed=1;dashPattern=5 5;endArrow=classic;endFill=1" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="220" y="217" as="sourcePoint"/>
                        <mxPoint x="420" y="217" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="df_cpu_spu" value="Cmd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#FF6600;strokeWidth=2;dashed=1;dashPattern=5 5;endArrow=classic;endFill=1" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="220" y="226" as="sourcePoint"/>
                        <mxPoint x="580" y="226" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="df_int_cpu" value="IRQ Signal" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#CC0000;strokeWidth=2;endArrow=classic;endFill=1" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="740.0000000000002" y="260" as="sourcePoint"/>
                        <mxPoint x="220" y="260" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="footer" value="実装フェーズ: Phase 0-FreeBIOS | Phase 1-3-Foundation | Phase 4-5-GPU/ROM | Phase 6-8-UI/Interrupt | Phase 9-Instruction(ARM9⭐) | Phase 10-14-ARM7/3D/Optim" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=0;strokeColor=#CCCCCC;fillColor=#F5F5F5;fontSize=10" parent="1" vertex="1">
                    <mxGeometry x="50" y="880" width="1300" height="50" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>